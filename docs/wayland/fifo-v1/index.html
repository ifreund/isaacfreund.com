<!doctype html><html lang=en><meta name=viewport content="width=device-width,initial-scale=1"><title></title><link rel=icon href=/if.png><link rel=stylesheet href=/style.css><link rel=alternate href=/blog/feed.xml type=application/atom+xml title="Isaac Freund's Blog"><link rel=alternate href=/poetry/feed.xml type=application/atom+xml title="Isaac Freund's Poetry"><link rel=me href=https://hachyderm.io/@ifreund><header><nav><input type=checkbox id=toggle><div class=nav-bar><div class=nav-home><a href=/><svg viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="1" height="1"/><rect x="0" y="2" width="1" height="3"/><path d="M2 0h3v1H3v1h2v1H3v2H2V0z"/><rect x="4" y="4" width="1" height="1"/></svg></a></div><div class=menu><label for=toggle class=menu-button><svg class="menu-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="5" height="1"/><rect x="0" y="2" width="5" height="1"/><rect x="0" y="4" width="5" height="1"/></svg>
<svg class="close-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><line x1="0" y1="0" x2="5" y2="5"/><line x1="0" y1="5" x2="5" y2="0"/></svg></label></div></div></div><div class=nav-items><a href=/about>about</a>
<a href=/blog>blog</a>
<a href=/software>software</a>
<a href=/poetry>poetry</a>
<a href=/consulting>consulting</a></div></nav></header><main class="wayland-protocol fifo-v1"><div class=title><div class=row><div><h1>fifo-v1</h1><p class=summary></div><div><p>(<a href=/docs/wayland>index</a>)<p></div></div></div><div class=content><div class=interface-head><div class=row><div><h2><a id=wp_fifo_manager_v1 href=#wp_fifo_manager_v1>wp_fifo_manager_v1</a></h2><p class=summary>protocol for fifo constraints</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>When a Wayland compositor considers applying a content update,
it must ensure all the update's readiness constraints (fences, etc)
are met.<p>This protocol provides a way to use the completion of a display refresh
cycle as an additional readiness constraint.<p>Warning! The protocol described in this file is currently in the testing
phase. Backward compatible changes may be added together with the
corresponding interface version bump. Backward incompatible changes can
only be done by creating a new major version of the extension.</div><div class=message-head><div class=row><div><h3><a id=wp_fifo_manager_v1.destroy href=#wp_fifo_manager_v1.destroy>wp_fifo_manager_v1.destroy</a></h3><p class=summary>unbind from the manager interface</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Informs the server that the client will no longer be using
this protocol object. Existing objects created by this object
are not affected.</div><div class=message-head><div class=row><div><h3><a id=wp_fifo_manager_v1.get_fifo href=#wp_fifo_manager_v1.get_fifo>wp_fifo_manager_v1.get_fifo</a></h3><p class=summary>request fifo interface for surface</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Establish a fifo object for a surface that may be used to add
display refresh constraints to content updates.<p>Only one such object may exist for a surface and attempting
to create more than one will result in an already_exists
protocol error. If a surface is acted on by multiple software
components, general best practice is that only the component
performing <b><a href=/docs/wayland/wayland/)])))#wl_surface.attach>wl_surface.attach</a></b> operations should use this protocol.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/fifo-v1/#wp_fifo_v1>wp_fifo_v1</a></b>><td><p><tr><td>surface<td>object&lt;<b><a href=/docs/wayland/wayland/#wl_surface>wl_surface</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=wp_fifo_manager_v1.enums.error href=#wp_fifo_manager_v1.enums.error>wp_fifo_manager_v1.error</a></h3><p class=summary>fatal presentation error</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p>These fatal protocol errors may be emitted in response to
illegal requests.</div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>already_exists<td>0<td>1<td><p>fifo manager already exists for surface</table><div class=interface-head><div class=row><div><h2><a id=wp_fifo_v1 href=#wp_fifo_v1>wp_fifo_v1</a></h2><p class=summary>fifo interface</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>A fifo object for a surface that may be used to add
display refresh constraints to content updates.</div><div class=message-head><div class=row><div><h3><a id=wp_fifo_v1.set_barrier href=#wp_fifo_v1.set_barrier>wp_fifo_v1.set_barrier</a></h3><p class=summary>sets the start point for a fifo constraint</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>When the content update containing the "<b><a href=/docs/wayland/fifo-v1/))))#wp_fifo_v1.set_barrier>set_barrier</a></b>" is applied,
it sets a "fifo_barrier" condition on the surface associated with
the fifo object. The condition is cleared immediately after the
following latching deadline for non-tearing presentation.<p>The compositor may clear the condition early if it must do so to
ensure client forward progress assumptions.<p>To wait for this condition to clear, use the "<b><a href=/docs/wayland/fifo-v1/))))#wp_fifo_v1.wait_barrier>wait_barrier</a></b>" request.<p>"<b><a href=/docs/wayland/fifo-v1/))))#wp_fifo_v1.set_barrier>set_barrier</a></b>" is double-buffered state, see <b><a href=/docs/wayland/wayland/)])))#wl_surface.commit>wl_surface.commit</a></b>.<p>Requesting <b><a href=/docs/wayland/fifo-v1/))))#wp_fifo_v1.set_barrier>set_barrier</a></b> after the fifo object's surface is
destroyed will generate a "surface_destroyed" error.</div><div class=message-head><div class=row><div><h3><a id=wp_fifo_v1.wait_barrier href=#wp_fifo_v1.wait_barrier>wp_fifo_v1.wait_barrier</a></h3><p class=summary>adds a fifo constraint to a content update</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Indicate that this content update is not ready while a
"fifo_barrier" condition is present on the surface.<p>This means that when the content update containing "<b><a href=/docs/wayland/fifo-v1/))))#wp_fifo_v1.set_barrier>set_barrier</a></b>"
was made active at a latching deadline, it will be active for
at least one refresh cycle. A content update which is allowed to
tear might become active after a latching deadline if no content
update became active at the deadline.<p>The constraint must be ignored if the surface is a subsurface in
synchronized mode. If the surface is not being updated by the
compositor (off-screen, occluded) the compositor may ignore the
constraint. Clients must use an additional mechanism such as
frame callbacks or timestamps to ensure throttling occurs under
all conditions.<p>"<b><a href=/docs/wayland/fifo-v1/))))#wp_fifo_v1.wait_barrier>wait_barrier</a></b>" is double-buffered state, see <b><a href=/docs/wayland/wayland/)])))#wl_surface.commit>wl_surface.commit</a></b>.<p>Requesting "<b><a href=/docs/wayland/fifo-v1/))))#wp_fifo_v1.wait_barrier>wait_barrier</a></b>" after the fifo object's surface is
destroyed will generate a "surface_destroyed" error.</div><div class=message-head><div class=row><div><h3><a id=wp_fifo_v1.destroy href=#wp_fifo_v1.destroy>wp_fifo_v1.destroy</a></h3><p class=summary>destroy the fifo interface</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Informs the server that the client will no longer be using
this protocol object.<p>Surface state changes previously made by this protocol are
unaffected by this object's destruction.</div><div class=message-head><div class=row><div><h3><a id=wp_fifo_v1.enums.error href=#wp_fifo_v1.enums.error>wp_fifo_v1.error</a></h3><p class=summary>fatal error</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p>These fatal protocol errors may be emitted in response to
illegal requests.</div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>surface_destroyed<td>0<td>1<td><p>the associated surface no longer exists</table><div class=interface-head><h2>Copyright</h2></div><div class=copyright><p><br>Copyright © 2023 Valve Corporation<br><br>Permission is hereby granted, free of charge, to any person obtaining a<br>copy of this software and associated documentation files (the "Software"),<br>to deal in the Software without restriction, including without limitation<br>the rights to use, copy, modify, merge, publish, distribute, sublicense,<br>and/or sell copies of the Software, and to permit persons to whom the<br>Software is furnished to do so, subject to the following conditions:<br><br>The above copyright notice and this permission notice (including the next<br>paragraph) shall be included in all copies or substantial portions of the<br>Software.<br><br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL<br>THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING<br>FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER<br>DEALINGS IN THE SOFTWARE.<br></div></div></main><footer><span class=line>© 2021-2026 Isaac Freund,</span>
<span class=line><a href=/impressum>Impressum</a>,</span>
<span class=line>Content <a href=/CC-BY-NC-SA-4.0.txt>CC-BY-NC-SA-4.0</a>,</span>
<span class=line><a href=https://codeberg.org/ifreund/website>Source Code</a> <a href=/AGPL-3.0-only.txt>AGPL-3.0-only</a></span></footer>