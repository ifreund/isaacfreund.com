<!doctype html><html lang=en><meta name=viewport content="width=device-width,initial-scale=1"><title></title><link rel=icon href=/if.png><link rel=stylesheet href=/style.css><link rel=alternate href=/blog/feed.xml type=application/atom+xml title="Isaac Freund's Blog"><link rel=alternate href=/poetry/feed.xml type=application/atom+xml title="Isaac Freund's Poetry"><link rel=me href=https://hachyderm.io/@ifreund><header><nav><input type=checkbox id=toggle><div class=nav-bar><div class=nav-home><a href=/><svg viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="1" height="1"/><rect x="0" y="2" width="1" height="3"/><path d="M2 0h3v1H3v1h2v1H3v2H2V0z"/><rect x="4" y="4" width="1" height="1"/></svg></a></div><div class=menu><label for=toggle class=menu-button><svg class="menu-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="5" height="1"/><rect x="0" y="2" width="5" height="1"/><rect x="0" y="4" width="5" height="1"/></svg>
<svg class="close-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><line x1="0" y1="0" x2="5" y2="5"/><line x1="0" y1="5" x2="5" y2="0"/></svg></label></div></div></div><div class=nav-items><a href=/about>about</a>
<a href=/blog>blog</a>
<a href=/software>software</a>
<a href=/poetry>poetry</a>
<a href=/consulting>consulting</a></div></nav></header><main class="wayland xwayland-keyboard-grab-unstable-v1"><div class=title><h1>xwayland-keyboard-grab-unstable-v1</h1><p class=summary>Protocol for grabbing the keyboard from Xwayland</div><div class=content><div class=description><p>This protocol is application-specific to meet the needs of the X11
protocol through Xwayland. It provides a way for Xwayland to request
all keyboard events to be forwarded to a surface even when the
surface does not have keyboard focus.<p>In the X11 protocol, a client may request an "active grab" on the
keyboard. On success, all key events are reported only to the
grabbing X11 client. For details, see XGrabKeyboard(3).<p>The core Wayland protocol does not have a notion of an active
keyboard grab. When running in Xwayland, X11 applications may
acquire an active grab inside Xwayland but that cannot be translated
to the Wayland compositor who may set the input focus to some other
surface. In doing so, it breaks the X11 client assumption that all
key events are reported to the grabbing client.<p>This protocol specifies a way for Xwayland to request all keyboard
be directed to the given surface. The protocol does not guarantee
that the compositor will honor this request and it does not
prescribe user interfaces on how to handle the respond. For example,
a compositor may inform the user that all key events are now
forwarded to the given client surface, or it may ask the user for
permission to do so.<p>Compositors are required to restrict access to this application
specific protocol to Xwayland alone.<p>Warning! The protocol described in this file is experimental and
backward incompatible changes may be made. Backward compatible
changes may be added together with the corresponding interface
version bump.
Backward incompatible changes are done by bumping the version
number in the protocol and interface names and resetting the
interface version. Once the protocol is to be declared stable,
the 'z' prefix and the version number in the protocol and
interface names are removed and the interface version number is
reset.</div><div class=interface-head><div class=row><div><h2><a id=zwp_xwayland_keyboard_grab_manager_v1 href=#zwp_xwayland_keyboard_grab_manager_v1>zwp_xwayland_keyboard_grab_manager_v1</a></h2><p class=summary>context object for keyboard grab manager</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>A global interface used for grabbing the keyboard.</div><div class=message-head><div class=row><div><h3><a id=zwp_xwayland_keyboard_grab_manager_v1.destroy href=#zwp_xwayland_keyboard_grab_manager_v1.destroy>zwp_xwayland_keyboard_grab_manager_v1.destroy</a></h3><p class=summary>destroy the keyboard grab manager</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the keyboard grab manager.</div><div class=message-head><div class=row><div><h3><a id=zwp_xwayland_keyboard_grab_manager_v1.grab_keyboard href=#zwp_xwayland_keyboard_grab_manager_v1.grab_keyboard>zwp_xwayland_keyboard_grab_manager_v1.grab_keyboard</a></h3><p class=summary>grab the keyboard to a surface</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>The grab_keyboard request asks for a grab of the keyboard, forcing
the keyboard focus for the given seat upon the given surface.<p>The protocol provides no guarantee that the grab is ever satisfied,
and does not require the compositor to send an error if the grab
cannot ever be satisfied. It is thus possible to request a keyboard
grab that will never be effective.<p>The protocol:<p>* does not guarantee that the grab itself is applied for a surface,
the grab request may be silently ignored by the compositor,
* does not guarantee that any events are sent to this client even
if the grab is applied to a surface,
* does not guarantee that events sent to this client are exhaustive,
a compositor may filter some events for its own consumption,
* does not guarantee that events sent to this client are continuous,
a compositor may change and reroute keyboard events while the grab
is nominally active.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/xwayland-keyboard-grab-unstable-v1/#zwp_xwayland_keyboard_grab_v1>zwp_xwayland_keyboard_grab_v1</a></b>><td><p><tr><td>surface<td>object&lt;<b><a href=/docs/wayland/wayland/#wl_surface>wl_surface</a></b>><td><p>surface to report keyboard events to<tr><td>seat<td>object&lt;<b><a href=/docs/wayland/wayland/#wl_seat>wl_seat</a></b>><td><p>the seat for which the keyboard should be grabbed</table><div class=interface-head><div class=row><div><h2><a id=zwp_xwayland_keyboard_grab_v1 href=#zwp_xwayland_keyboard_grab_v1>zwp_xwayland_keyboard_grab_v1</a></h2><p class=summary>interface for grabbing the keyboard</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>A global interface used for grabbing the keyboard.</div><div class=message-head><div class=row><div><h3><a id=zwp_xwayland_keyboard_grab_v1.destroy href=#zwp_xwayland_keyboard_grab_v1.destroy>zwp_xwayland_keyboard_grab_v1.destroy</a></h3><p class=summary>destroy the grabbed keyboard object</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the grabbed keyboard object. If applicable, the compositor
will ungrab the keyboard.</div><div class=interface-head><h2>Copyright</h2></div><div class=copyright><p><br>Copyright © 2017 Red Hat Inc.<br><br>Permission is hereby granted, free of charge, to any person obtaining a<br>copy of this software and associated documentation files (the "Software"),<br>to deal in the Software without restriction, including without limitation<br>the rights to use, copy, modify, merge, publish, distribute, sublicense,<br>and/or sell copies of the Software, and to permit persons to whom the<br>Software is furnished to do so, subject to the following conditions:<br><br>The above copyright notice and this permission notice (including the next<br>paragraph) shall be included in all copies or substantial portions of the<br>Software.<br><br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL<br>THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING<br>FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER<br>DEALINGS IN THE SOFTWARE.<br></div></div></main><footer><span class=line>© 2021-2026 Isaac Freund,</span>
<span class=line><a href=/impressum>Impressum</a>,</span>
<span class=line>Content <a href=/CC-BY-NC-SA-4.0.txt>CC-BY-NC-SA-4.0</a>,</span>
<span class=line><a href=https://codeberg.org/ifreund/website>Source Code</a> <a href=/AGPL-3.0-only.txt>AGPL-3.0-only</a></span></footer>