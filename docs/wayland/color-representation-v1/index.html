<!doctype html><html lang=en><meta name=viewport content="width=device-width,initial-scale=1"><title></title><link rel=icon href=/if.png><link rel=stylesheet href=/style.css><link rel=alternate href=/blog/feed.xml type=application/atom+xml title="Isaac Freund's Blog"><link rel=alternate href=/poetry/feed.xml type=application/atom+xml title="Isaac Freund's Poetry"><link rel=me href=https://hachyderm.io/@ifreund><header><nav><input type=checkbox id=toggle><div class=nav-bar><div class=nav-home><a href=/><svg viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="1" height="1"/><rect x="0" y="2" width="1" height="3"/><path d="M2 0h3v1H3v1h2v1H3v2H2V0z"/><rect x="4" y="4" width="1" height="1"/></svg></a></div><div class=menu><label for=toggle class=menu-button><svg class="menu-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="5" height="1"/><rect x="0" y="2" width="5" height="1"/><rect x="0" y="4" width="5" height="1"/></svg>
<svg class="close-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><line x1="0" y1="0" x2="5" y2="5"/><line x1="0" y1="5" x2="5" y2="0"/></svg></label></div></div></div><div class=nav-items><a href=/about>about</a>
<a href=/blog>blog</a>
<a href=/software>software</a>
<a href=/poetry>poetry</a>
<a href=/consulting>consulting</a></div></nav></header><main class="wayland-protocol color-representation-v1"><div class=title><div class=row><div><h1>color-representation-v1</h1><p class=summary>color representation protocol extension</div><div><p>(<a href=/docs/wayland>index</a>)<p></div></div></div><div class=content><div class=description><p>This protocol extension delivers the metadata required to define alpha mode,
the color model, sub-sampling and quantization range used when interpreting
buffer contents. The main use case is defining how the YCbCr family of pixel
formats convert to RGB.<p>Note that this protocol does not define the colorimetry of the resulting RGB
channels / tristimulus values. Without the help of other extensions the
resulting colorimetry is therefore implementation defined.<p>If this extension is not used, the color representation used is compositor
implementation defined.<p>Recommendation ITU-T H.273
"Coding-independent code points for video signal type identification"
shall be referred to as simply H.273 here.</div><div class=interface-head><div class=row><div><h2><a id=wp_color_representation_manager_v1 href=#wp_color_representation_manager_v1>wp_color_representation_manager_v1</a></h2><p class=summary>color representation manager singleton</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>A singleton global interface used for getting color representation
extensions for wl_surface. The extension interfaces allow setting the
color representation of surfaces.<p>Compositors should never remove this global.</div><div class=message-head><div class=row><div><h3><a id=wp_color_representation_manager_v1.destroy href=#wp_color_representation_manager_v1.destroy>wp_color_representation_manager_v1.destroy</a></h3><p class=summary>destroy the manager</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_manager_v1>wp_color_representation_manager_v1</a></b> object. This does not
affect any other objects in any way.</div><div class=message-head><div class=row><div><h3><a id=wp_color_representation_manager_v1.get_surface href=#wp_color_representation_manager_v1.get_surface>wp_color_representation_manager_v1.get_surface</a></h3><p class=summary>create a color representation interface for a wl_surface</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>If a <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b> object already exists for the
given wl_surface, the protocol error surface_exists is raised.<p>This creates a new color <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b> object for
the given wl_surface.<p>See the <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b> interface for more details.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b>><td><p><tr><td>surface<td>object&lt;<b><a href=/docs/wayland/wayland/#wl_surface>wl_surface</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_manager_v1.supported_alpha_mode href=#wp_color_representation_manager_v1.supported_alpha_mode>wp_color_representation_manager_v1.supported_alpha_mode</a></h3><p class=summary>supported alpha modes</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>When this object is created, it shall immediately send this event once
for each alpha mode the compositor supports.<p>For the definition of the supported values, see the
wp_color_representation_surface_v1::alpha_mode enum.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>alpha_mode<td>uint&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1.enums.alpha_mode>wp_color_representation_surface_v1.alpha_mode</a></b>><td><p>supported alpha mode</table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_manager_v1.supported_coefficients_and_ranges href=#wp_color_representation_manager_v1.supported_coefficients_and_ranges>wp_color_representation_manager_v1.supported_coefficients_and_ranges</a></h3><p class=summary>supported matrix coefficients and ranges</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>When this object is created, it shall immediately send this event once
for each matrix coefficient and color range combination the compositor
supports.<p>For the definition of the supported values, see the
wp_color_representation_surface_v1::coefficients and
wp_color_representation_surface_v1::range enums.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>coefficients<td>uint&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1.enums.coefficients>wp_color_representation_surface_v1.coefficients</a></b>><td><p>supported matrix coefficients<tr><td>range<td>uint&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1.enums.range>wp_color_representation_surface_v1.range</a></b>><td><p>full range flag</table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_manager_v1.done href=#wp_color_representation_manager_v1.done>wp_color_representation_manager_v1.done</a></h3><p class=summary>all features have been sent</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>This event is sent when all supported features have been sent.</div><div class=message-head><div class=row><div><h3><a id=wp_color_representation_manager_v1.enums.error href=#wp_color_representation_manager_v1.enums.error>wp_color_representation_manager_v1.error</a></h3><p class=summary>protocol errors</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p></div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>surface_exists<td>1<td>1<td><p>color representation surface exists already</table><div class=interface-head><div class=row><div><h2><a id=wp_color_representation_surface_v1 href=#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></h2><p class=summary>color representation extension to a surface</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>A <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b> allows the client to set the color
representation metadata of a surface.<p>By default, a surface does not have any color representation metadata set.
The reconstruction of R, G, B signals on such surfaces is compositor
implementation defined. The alpha mode is assumed to be
premultiplied_electrical when the alpha mode is unset.<p>If the <b><a href=/docs/wayland/wayland/#wl_surface>wl_surface</a></b> associated with the <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b>
is destroyed, the <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b> object becomes inert.</div><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.destroy href=#wp_color_representation_surface_v1.destroy>wp_color_representation_surface_v1.destroy</a></h3><p class=summary>destroy the color representation</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b> object.<p>Destroying this object unsets all the color representation metadata from
the surface. See the <b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1>wp_color_representation_surface_v1</a></b> interface
description for how a compositor handles a surface without color
representation metadata. Unsetting is double-buffered state, see
wl_surface.commit.</div><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.set_alpha_mode href=#wp_color_representation_surface_v1.set_alpha_mode>wp_color_representation_surface_v1.set_alpha_mode</a></h3><p class=summary>set the surface alpha mode</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>If this protocol object is inert, the protocol error inert is raised.<p>Assuming an alpha channel exists, it is always linear. The alpha mode
determines whether and how the color channels include pre-multiplied
alpha. Using straight alpha might have performance benefits.<p>Only alpha modes advertised by the compositor are allowed to be used as
argument for this request. The "alpha_mode" protocol error is raised
otherwise.<p>Alpha mode is double buffered, see wl_surface.commit.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>alpha_mode<td>uint&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1.enums.alpha_mode>alpha_mode</a></b>><td><p>alpha mode</table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.set_coefficients_and_range href=#wp_color_representation_surface_v1.set_coefficients_and_range>wp_color_representation_surface_v1.set_coefficients_and_range</a></h3><p class=summary>set the matrix coefficients and range</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>If this protocol object is inert, the protocol error inert is raised.<p>Set the matrix coefficients and video range which defines the formula
and the related constants used to derive red, green and blue signals.
Usually coefficients correspond to MatrixCoefficients code points in
H.273.<p>Only combinations advertised by the compositor are allowed to be used as
argument for this request. The "coefficients" protocol error is raised
otherwise.<p>A call to <b><a href=/docs/wayland/wayland/#wl_surface.commit>wl_surface.commit</a></b> verifies that the pixel format and the
coefficients-range combination in the committed surface contents are
compatible, if contents exist. The "pixel_format" protocol error is
raised otherwise.<p>A pixel format is compatible with the coefficients-range combination if
the related equations and conventions as defined in H.273 can produce
the color channels (RGB or YCbCr) of the pixel format.<p>For the definition of the supported combination, see the
wp_color_representation_surface_v1::coefficients and
wp_color_representation_surface_v1::range enums.<p>The coefficients-range combination is double-buffered, see
wl_surface.commit.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>coefficients<td>uint&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1.enums.coefficients>coefficients</a></b>><td><p>matrix coefficients<tr><td>range<td>uint&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1.enums.range>range</a></b>><td><p>range</table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.set_chroma_location href=#wp_color_representation_surface_v1.set_chroma_location>wp_color_representation_surface_v1.set_chroma_location</a></h3><p class=summary>set the chroma location</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>If this protocol object is inert, the protocol error inert is raised.<p>Set the chroma location type which defines the position of downsampled
chroma samples, corresponding to Chroma420SampleLocType code points in
H.273.<p>An invalid chroma location enum value raises the "chroma_location"
protocol error.<p>A call to <b><a href=/docs/wayland/wayland/#wl_surface.commit>wl_surface.commit</a></b> verifies that the pixel format and chroma
location type in the committed surface contents are compatible, if
contents exist. The "pixel_format" protocol error is raised otherwise.<p>For the definition of the supported chroma location types, see the
wp_color_representation_surface_v1::chroma_location enum.<p>The chroma location type is double-buffered, see wl_surface.commit.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>chroma_location<td>uint&lt;<b><a href=/docs/wayland/color-representation-v1/#wp_color_representation_surface_v1.enums.chroma_location>chroma_location</a></b>><td><p>chroma sample location</table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.enums.error href=#wp_color_representation_surface_v1.enums.error>wp_color_representation_surface_v1.error</a></h3><p class=summary>protocol errors</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p></div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>alpha_mode<td>1<td>1<td><p>unsupported alpha mode<tr><td>coefficients<td>2<td>1<td><p>unsupported coefficients<tr><td>pixel_format<td>3<td>1<td><p>the pixel format and a set value are incompatible<tr><td>inert<td>4<td>1<td><p>forbidden request on inert object<tr><td>chroma_location<td>5<td>1<td><p>invalid chroma location</table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.enums.alpha_mode href=#wp_color_representation_surface_v1.enums.alpha_mode>wp_color_representation_surface_v1.alpha_mode</a></h3><p class=summary>alpha mode</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p>Specifies how the alpha channel affects the color channels.</div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>premultiplied_electrical<td>0<td>1<td><p>premultiplied alpha in electrical values<div class=description><p>Electrical color channel values (after transfer function encoding)
are already multiplied with the alpha channel value.</div><tr><td>premultiplied_optical<td>1<td>1<td><p>premultiplied alpha in optical values<div class=description><p>Optical color channel values (before transfer function encoding)
are already multiplied with the alpha channel value.</div><tr><td>straight<td>2<td>1<td><p>straight alpha<div class=description><p>Alpha channel has not been pre-multiplied into color channels.</div></table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.enums.coefficients href=#wp_color_representation_surface_v1.enums.coefficients>wp_color_representation_surface_v1.coefficients</a></h3><p class=summary>named coefficients</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p>Named matrix coefficients used to encode well-known sets of
coefficients. H.273 is the authority, when it comes to the exact values
of coefficients and authoritative specifications, where an equivalent
code point exists.<p>A value of 0 is invalid and will never be present in the list of enums.<p>Descriptions do list the specifications for convenience.</div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>identity<td>1<td>1<td><p>The identity matrix<div class=description><p>Coefficients as defined by
- IEC 61966-2-1 sRGB
- SMPTE ST 428-1 (2019)<p>Equivalent to H.273 MatrixCoefficients code point 0.
Compatible with pixel formats of the RGB family.</div><tr><td>bt709<td>2<td>1<td><p>BT.709 matrix coefficients<div class=description><p>Coefficients as defined by
- Rec. ITU-R BT.709-6
- Rec. ITU-R BT.1361-0 conventional colour gamut system (historical)
- Rec. ITU-R BT.1361-0 conventional colour gamut system and extended
colour gamut system (historical)
- IEC 61966-2-4 xvYCC709
- SMPTE RP 177 (1993) Annex B<p>Equivalent to H.273 MatrixCoefficients code point 1.
Compatible with pixel formats of the YCbCr family.</div><tr><td>fcc<td>3<td>1<td><p>FCC matrix coefficients<div class=description><p>Coefficients as defined by
- United States Federal Communications Commission (2003) Title 47
Code of Federal Regulations 73.682 (a) (20)<p>Equivalent to H.273 MatrixCoefficients code point 4.
Compatible with pixel formats of the YCbCr family.</div><tr><td>bt601<td>4<td>1<td><p>BT.601-7 matrix coefficients<div class=description><p>Coefficients as defined by
- Rec. ITU-R BT.470-6 System B, G (historical)
- Rec. ITU-R BT.601-7 625
- Rec. ITU-R BT.601-7 525
- Rec. ITU-R BT.1358-0 625 (historical)
- Rec. ITU-R BT.1358-1 525 or 625 (historical)
- Rec. ITU-R BT.1700-0 625 PAL and 625 SECAM
- Rec. ITU-R BT.1700-0 NTSC
- IEC 61966-2-1 sYCC
- IEC 61966-2-4 xvYCC601
- SMPTE ST 170 (2004)<p>Equivalent to H.273 MatrixCoefficients code point 5, 6.
Compatible with pixel formats of the YCbCr family.</div><tr><td>smpte240<td>5<td>1<td><p>SMPTE ST 240 matrix coefficients<div class=description><p>Coefficients as defined by
- SMPTE ST 240 (1999)<p>Equivalent to H.273 MatrixCoefficients code point 7.
Compatible with pixel formats of the YCbCr family.</div><tr><td>bt2020<td>6<td>1<td><p>BT.2020 and BT.2100 YCbCr matrix coefficients<div class=description><p>Coefficients as defined by
- Rec. ITU-R BT.2020-2 (non-constant luminance)
- Rec. ITU-R BT.2100-2 Y′CbCr<p>Equivalent to H.273 MatrixCoefficients code point 9.
Compatible with pixel formats of the YCbCr family.</div><tr><td>bt2020_cl<td>7<td>1<td><p>BT.2020 matrix coefficients for constant luminance<div class=description><p>Coefficients as defined by
- Rec. ITU-R BT.2020-2 (constant luminance)<p>Equivalent to H.273 MatrixCoefficients code point 10.
Compatible with pixel formats of the YCbCr family.</div><tr><td>ictcp<td>8<td>1<td><p>BT.2100 ICtCp matrix coefficients<div class=description><p>Coefficients as defined by
- Rec. ITU-R BT.2100-2 ICTCP<p>Equivalent to H.273 MatrixCoefficients code point 14.
Compatible with pixel formats of the YCbCr family.</div></table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.enums.range href=#wp_color_representation_surface_v1.enums.range>wp_color_representation_surface_v1.range</a></h3><p class=summary>Color range values</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p>Possible color range values.<p>A value of 0 is invalid and will never be present in the list of enums.</div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>full<td>1<td>1<td><p>Full color range<tr><td>limited<td>2<td>1<td><p>Limited color range</table><div class=message-head><div class=row><div><h3><a id=wp_color_representation_surface_v1.enums.chroma_location href=#wp_color_representation_surface_v1.enums.chroma_location>wp_color_representation_surface_v1.chroma_location</a></h3><p class=summary>Chroma sample location for 4:2:0 YCbCr</div><div><b>Enum</b><br>Since Version 1</div></div></div><div class=description><p>Chroma sample location as defined by H.273 Chroma420SampleLocType.<p>A value of 0 is invalid and will never be present in the list of enums.<p>The descriptions list the matching Vulkan VkChromaLocation combinations
for convenience.</div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>type_0<td>1<td>1<td><p>Horizontal offset of 0, vertical offset of 0.5<div class=description><p>Corresponding to VkChromaLocations:
- xChromaOffset: VK_CHROMA_LOCATION_COSITED_EVEN
- yChromaOffset: VK_CHROMA_LOCATION_MIDPOINT<p>Equivalent to H.273 Chroma420SampleLocType 0.</div><tr><td>type_1<td>2<td>1<td><p>Horizontal offset of 0.5, vertical offset of 0.5<div class=description><p>Corresponding to VkChromaLocations:
- xChromaOffset: VK_CHROMA_LOCATION_MIDPOINT
- yChromaOffset: VK_CHROMA_LOCATION_MIDPOINT<p>Equivalent to H.273 Chroma420SampleLocType 1.</div><tr><td>type_2<td>3<td>1<td><p>Horizontal offset of 0, vertical offset of 0<div class=description><p>Corresponding to VkChromaLocations:
- xChromaOffset: VK_CHROMA_LOCATION_COSITED_EVEN
- yChromaOffset: VK_CHROMA_LOCATION_COSITED_EVEN<p>Equivalent to H.273 Chroma420SampleLocType 2.</div><tr><td>type_3<td>4<td>1<td><p>Horizontal offset of 0.5, vertical offset of 0<div class=description><p>Corresponding to VkChromaLocations:
- xChromaOffset: VK_CHROMA_LOCATION_MIDPOINT
- yChromaOffset: VK_CHROMA_LOCATION_COSITED_EVEN<p>Equivalent to H.273 Chroma420SampleLocType 3.</div><tr><td>type_4<td>5<td>1<td><p>Horizontal offset of 0, vertical offset of 1<div class=description><p>Equivalent to H.273 Chroma420SampleLocType 4.</div><tr><td>type_5<td>6<td>1<td><p>Horizontal offset of 0.5, vertical offset of 1<div class=description><p>Equivalent to H.273 Chroma420SampleLocType 5.</div></table><div class=interface-head><h2>Copyright</h2></div><div class=copyright><p><br>Copyright 2022 Simon Ser<br>Copyright 2022 Red Hat, Inc.<br>Copyright 2022 Collabora, Ltd.<br>Copyright 2022-2025 Red Hat, Inc.<br><br>Permission is hereby granted, free of charge, to any person obtaining a<br>copy of this software and associated documentation files (the "Software"),<br>to deal in the Software without restriction, including without limitation<br>the rights to use, copy, modify, merge, publish, distribute, sublicense,<br>and/or sell copies of the Software, and to permit persons to whom the<br>Software is furnished to do so, subject to the following conditions:<br><br>The above copyright notice and this permission notice (including the next<br>paragraph) shall be included in all copies or substantial portions of the<br>Software.<br><br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL<br>THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING<br>FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER<br>DEALINGS IN THE SOFTWARE.<br></div></div></main><footer><span class=line>© 2021-2026 Isaac Freund,</span>
<span class=line><a href=/impressum>Impressum</a>,</span>
<span class=line>Content <a href=/CC-BY-NC-SA-4.0.txt>CC-BY-NC-SA-4.0</a>,</span>
<span class=line><a href=https://codeberg.org/ifreund/website>Source Code</a> <a href=/AGPL-3.0-only.txt>AGPL-3.0-only</a></span></footer>