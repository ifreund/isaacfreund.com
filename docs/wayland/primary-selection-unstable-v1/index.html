<!doctype html><html lang=en><meta name=viewport content="width=device-width,initial-scale=1"><title></title><link rel=icon href=/if.png><link rel=stylesheet href=/style.css><link rel=alternate href=/blog/feed.xml type=application/atom+xml title="Isaac Freund's Blog"><link rel=alternate href=/poetry/feed.xml type=application/atom+xml title="Isaac Freund's Poetry"><link rel=me href=https://hachyderm.io/@ifreund><header><nav><input type=checkbox id=toggle><div class=nav-bar><div class=nav-home><a href=/><svg viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="1" height="1"/><rect x="0" y="2" width="1" height="3"/><path d="M2 0h3v1H3v1h2v1H3v2H2V0z"/><rect x="4" y="4" width="1" height="1"/></svg></a></div><div class=menu><label for=toggle class=menu-button><svg class="menu-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="5" height="1"/><rect x="0" y="2" width="5" height="1"/><rect x="0" y="4" width="5" height="1"/></svg>
<svg class="close-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><line x1="0" y1="0" x2="5" y2="5"/><line x1="0" y1="5" x2="5" y2="0"/></svg></label></div></div></div><div class=nav-items><a href=/about>about</a>
<a href=/blog>blog</a>
<a href=/software>software</a>
<a href=/poetry>poetry</a>
<a href=/consulting>consulting</a></div></nav></header><main class="wayland-protocol primary-selection-unstable-v1"><div class=title><div class=row><div><h1>primary-selection-unstable-v1</h1><p class=summary>Primary selection protocol</div><div><p>(<a href=/docs/wayland>index</a>)<p></div></div></div><div class=content><div class=description><p>This protocol provides the ability to have a primary selection device to
match that of the X server. This primary selection is a shortcut to the
common clipboard selection, where text just needs to be selected in order
to allow copying it elsewhere. The de facto way to perform this action
is the middle mouse button, although it is not limited to this one.<p>Clients wishing to honor primary selection should create a primary
selection source and set it as the selection through
wp_primary_selection_device.set_selection whenever the text selection
changes. In order to minimize calls in pointer-driven text selection,
it should happen only once after the operation finished. Similarly,
a NULL source should be set when text is unselected.<p>wp_primary_selection_offer objects are first announced through the
wp_primary_selection_device.data_offer event. Immediately after this event,
the primary data offer will emit wp_primary_selection_offer.offer events
to let know of the mime types being offered.<p>When the primary selection changes, the client with the keyboard focus
will receive wp_primary_selection_device.selection events. Only the client
with the keyboard focus will receive such events with a non-NULL
wp_primary_selection_offer. Across keyboard focus changes, previously
focused clients will receive wp_primary_selection_device.events with a
NULL wp_primary_selection_offer.<p>In order to request the primary selection data, the client must pass
a recent serial pertaining to the press event that is triggering the
operation, if the compositor deems the serial valid and recent, the
wp_primary_selection_source.send event will happen in the other end
to let the transfer begin. The client owning the primary selection
should write the requested data, and close the file descriptor
immediately.<p>If the primary selection owner client disappeared during the transfer,
the client reading the data will receive a
wp_primary_selection_device.selection event with a NULL
wp_primary_selection_offer, the client should take this as a hint
to finish the reads related to the no longer existing offer.<p>The primary selection owner should be checking for errors during
writes, merely cancelling the ongoing transfer if any happened.</div><div class=interface-head><div class=row><div><h2><a id=zwp_primary_selection_device_manager_v1 href=#zwp_primary_selection_device_manager_v1>zwp_primary_selection_device_manager_v1</a></h2><p class=summary>X primary selection emulation</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>The primary selection device manager is a singleton global object that
provides access to the primary selection. It allows to create
wp_primary_selection_source objects, as well as retrieving the per-seat
wp_primary_selection_device objects.</div><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_device_manager_v1.create_source href=#zwp_primary_selection_device_manager_v1.create_source>zwp_primary_selection_device_manager_v1.create_source</a></h3><p class=summary>create a new primary selection source</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Create a new primary selection source.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_source_v1>zwp_primary_selection_source_v1</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_device_manager_v1.get_device href=#zwp_primary_selection_device_manager_v1.get_device>zwp_primary_selection_device_manager_v1.get_device</a></h3><p class=summary>create a new primary selection device</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Create a new data device for a given seat.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_device_v1>zwp_primary_selection_device_v1</a></b>><td><p><tr><td>seat<td>object&lt;<b><a href=/docs/wayland/wayland/#wl_seat>wl_seat</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_device_manager_v1.destroy href=#zwp_primary_selection_device_manager_v1.destroy>zwp_primary_selection_device_manager_v1.destroy</a></h3><p class=summary>destroy the primary selection device manager</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the primary selection device manager.</div><div class=interface-head><div class=row><div><h2><a id=zwp_primary_selection_device_v1 href=#zwp_primary_selection_device_v1>zwp_primary_selection_device_v1</a></h2><p class=summary></div><div><b>Interface</b><br>Version 1</div></div></div><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_device_v1.set_selection href=#zwp_primary_selection_device_v1.set_selection>zwp_primary_selection_device_v1.set_selection</a></h3><p class=summary>set the primary selection</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Replaces the current selection. The previous owner of the primary
selection will receive a wp_primary_selection_source.cancelled event.<p>To unset the selection, set the source to NULL.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>source<td>nullable
object&lt;<b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_source_v1>zwp_primary_selection_source_v1</a></b>><td><p><tr><td>serial<td>uint<td><p>serial of the event that triggered this request</table><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_device_v1.destroy href=#zwp_primary_selection_device_v1.destroy>zwp_primary_selection_device_v1.destroy</a></h3><p class=summary>destroy the primary selection device</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the primary selection device.</div><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_device_v1.data_offer href=#zwp_primary_selection_device_v1.data_offer>zwp_primary_selection_device_v1.data_offer</a></h3><p class=summary>introduce a new wp_primary_selection_offer</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>Introduces a new wp_primary_selection_offer object that may be used
to receive the current primary selection. Immediately following this
event, the new wp_primary_selection_offer object will send
wp_primary_selection_offer.offer events to describe the offered mime
types.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>offer<td>new_id&lt;<b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_offer_v1>zwp_primary_selection_offer_v1</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_device_v1.selection href=#zwp_primary_selection_device_v1.selection>zwp_primary_selection_device_v1.selection</a></h3><p class=summary>advertise a new primary selection</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>The wp_primary_selection_device.selection event is sent to notify the
client of a new primary selection. This event is sent after the
wp_primary_selection.<b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_device_v1.data_offer>data_offer</a></b> event introducing this object, and after
the offer has announced its mimetypes through
wp_primary_selection_offer.offer.<p>The <b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_device_v1.data_offer>data_offer</a></b> is valid until a new offer or NULL is received
or until the client loses keyboard focus. The client must destroy the
previous selection <b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_device_v1.data_offer>data_offer</a></b>, if any, upon receiving this event.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>nullable
object&lt;<b><a href=/docs/wayland/primary-selection-unstable-v1/#zwp_primary_selection_offer_v1>zwp_primary_selection_offer_v1</a></b>><td><p></table><div class=interface-head><div class=row><div><h2><a id=zwp_primary_selection_offer_v1 href=#zwp_primary_selection_offer_v1>zwp_primary_selection_offer_v1</a></h2><p class=summary>offer to transfer primary selection contents</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>A wp_primary_selection_offer represents an offer to transfer the contents
of the primary selection clipboard to the client. Similar to
<b><a href=/docs/wayland/wayland/#wl_data_offer>wl_data_offer</a></b>, the offer also describes the mime types that the data can
be converted to and provides the mechanisms for transferring the data
directly to the client.</div><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_offer_v1.receive href=#zwp_primary_selection_offer_v1.receive>zwp_primary_selection_offer_v1.receive</a></h3><p class=summary>request that the data is transferred</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>To transfer the contents of the primary selection clipboard, the client
issues this request and indicates the mime type that it wants to
receive. The transfer happens through the passed file descriptor
(typically created with the pipe system call). The source client writes
the data in the mime type representation requested and then closes the
file descriptor.<p>The receiving client reads from the read end of the pipe until EOF and
closes its end, at which point the transfer is complete.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p><tr><td>fd<td>fd<td><p></table><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_offer_v1.destroy href=#zwp_primary_selection_offer_v1.destroy>zwp_primary_selection_offer_v1.destroy</a></h3><p class=summary>destroy the primary selection offer</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the primary selection offer.</div><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_offer_v1.offer href=#zwp_primary_selection_offer_v1.offer>zwp_primary_selection_offer_v1.offer</a></h3><p class=summary>advertise offered mime type</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>Sent immediately after creating announcing the
wp_primary_selection_offer through
wp_primary_selection_device.data_offer. One event is sent per offered
mime type.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p></table><div class=interface-head><div class=row><div><h2><a id=zwp_primary_selection_source_v1 href=#zwp_primary_selection_source_v1>zwp_primary_selection_source_v1</a></h2><p class=summary>offer to replace the contents of the primary selection</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>The source side of a wp_primary_selection_offer, it provides a way to
describe the offered data and respond to requests to transfer the
requested contents of the primary selection clipboard.</div><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_source_v1.offer href=#zwp_primary_selection_source_v1.offer>zwp_primary_selection_source_v1.offer</a></h3><p class=summary>add an offered mime type</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>This request adds a mime type to the set of mime types advertised to
targets. Can be called several times to offer multiple types.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p></table><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_source_v1.destroy href=#zwp_primary_selection_source_v1.destroy>zwp_primary_selection_source_v1.destroy</a></h3><p class=summary>destroy the primary selection source</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroy the primary selection source.</div><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_source_v1.send href=#zwp_primary_selection_source_v1.send>zwp_primary_selection_source_v1.send</a></h3><p class=summary>send the primary selection contents</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>Request for the current primary selection contents from the client.
Send the specified mime type over the passed file descriptor, then
close it.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p><tr><td>fd<td>fd<td><p></table><div class=message-head><div class=row><div><h3><a id=zwp_primary_selection_source_v1.cancelled href=#zwp_primary_selection_source_v1.cancelled>zwp_primary_selection_source_v1.cancelled</a></h3><p class=summary>request for primary selection contents was canceled</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>This primary selection source is no longer valid. The client should
clean up and destroy this primary selection source.</div><div class=interface-head><h2>Copyright</h2></div><div class=copyright><p><br>Copyright © 2015, 2016 Red Hat<br><br>Permission is hereby granted, free of charge, to any person obtaining a<br>copy of this software and associated documentation files (the "Software"),<br>to deal in the Software without restriction, including without limitation<br>the rights to use, copy, modify, merge, publish, distribute, sublicense,<br>and/or sell copies of the Software, and to permit persons to whom the<br>Software is furnished to do so, subject to the following conditions:<br><br>The above copyright notice and this permission notice (including the next<br>paragraph) shall be included in all copies or substantial portions of the<br>Software.<br><br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL<br>THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING<br>FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER<br>DEALINGS IN THE SOFTWARE.<br></div></div></main><footer><span class=line>© 2021-2026 Isaac Freund,</span>
<span class=line><a href=/impressum>Impressum</a>,</span>
<span class=line>Content <a href=/CC-BY-NC-SA-4.0.txt>CC-BY-NC-SA-4.0</a>,</span>
<span class=line><a href=https://codeberg.org/ifreund/website>Source Code</a> <a href=/AGPL-3.0-only.txt>AGPL-3.0-only</a></span></footer>