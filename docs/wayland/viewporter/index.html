<!doctype html><html lang=en><meta name=viewport content="width=device-width,initial-scale=1"><title></title><link rel=icon href=/if.png><link rel=stylesheet href=/style.css><link rel=alternate href=/blog/feed.xml type=application/atom+xml title="Isaac Freund's Blog"><link rel=alternate href=/poetry/feed.xml type=application/atom+xml title="Isaac Freund's Poetry"><link rel=me href=https://hachyderm.io/@ifreund><header><nav><input type=checkbox id=toggle><div class=nav-bar><div class=nav-home><a href=/><svg viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="1" height="1"/><rect x="0" y="2" width="1" height="3"/><path d="M2 0h3v1H3v1h2v1H3v2H2V0z"/><rect x="4" y="4" width="1" height="1"/></svg></a></div><div class=menu><label for=toggle class=menu-button><svg class="menu-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="5" height="1"/><rect x="0" y="2" width="5" height="1"/><rect x="0" y="4" width="5" height="1"/></svg>
<svg class="close-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><line x1="0" y1="0" x2="5" y2="5"/><line x1="0" y1="5" x2="5" y2="0"/></svg></label></div></div></div><div class=nav-items><a href=/about>about</a>
<a href=/blog>blog</a>
<a href=/software>software</a>
<a href=/poetry>poetry</a>
<a href=/consulting>consulting</a></div></nav></header><main class="wayland-protocol viewporter"><div class=title><div class=row><div><h1>viewporter</h1><p class=summary></div><div><p>(<a href=/docs/wayland>index</a>)<p></div></div></div><div class=content><div class=interface-head><div class=row><div><h2><a id=wp_viewporter href=#wp_viewporter>wp_viewporter</a></h2><p class=summary>surface cropping and scaling</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>The global interface exposing surface cropping and scaling
capabilities is used to instantiate an interface extension for a
<b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b> object. This extended interface will then allow
cropping and scaling the surface contents, effectively
disconnecting the direct relationship between the buffer and the
surface size.</div><div class=message-head><div class=row><div><h3><a id=wp_viewporter.destroy href=#wp_viewporter.destroy>wp_viewporter.destroy</a></h3><p class=summary>unbind from the cropping and scaling interface</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Informs the server that the client will not be using this
protocol object anymore. This does not affect any other objects,
<b><a href=/docs/wayland/viewporter/)])))#wp_viewport>wp_viewport</a></b> objects included.</div><div class=message-head><div class=row><div><h3><a id=wp_viewporter.get_viewport href=#wp_viewporter.get_viewport>wp_viewporter.get_viewport</a></h3><p class=summary>extend surface interface for crop and scale</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Instantiate an interface extension for the given <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b> to
crop and scale its content. If the given <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b> already has
a <b><a href=/docs/wayland/viewporter/)])))#wp_viewport>wp_viewport</a></b> object associated, the viewport_exists
protocol error is raised.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/viewporter/#wp_viewport>wp_viewport</a></b>><td><p>the new viewport interface id<tr><td>surface<td>object&lt;<b><a href=/docs/wayland/wayland/#wl_surface>wl_surface</a></b>><td><p>the surface</table><div class=message-head><div class=row><div><h3><a id=wp_viewporter.enums.error href=#wp_viewporter.enums.error>wp_viewporter.error</a></h3><p class=summary></div><div><b>Enum</b><br>Since Version 1</div></div></div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>viewport_exists<td>0<td>1<td><p>the surface already has a viewport object associated</table><div class=interface-head><div class=row><div><h2><a id=wp_viewport href=#wp_viewport>wp_viewport</a></h2><p class=summary>crop and scale interface to a wl_surface</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>An additional interface to a <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b> object, which allows the
client to specify the cropping and scaling of the surface
contents.<p>This interface works with two concepts: the source rectangle (src_x,
src_y, src_width, src_height), and the destination size (dst_width,
dst_height). The contents of the source rectangle are scaled to the
destination size, and content outside the source rectangle is ignored.
This state is double-buffered, see <b><a href=/docs/wayland/wayland/)])))#wl_surface.commit>wl_surface.commit</a></b>.<p>The two parts of crop and scale state are independent: the source
rectangle, and the destination size. Initially both are unset, that
is, no scaling is applied. The whole of the current <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b> is
used as the source, and the surface size is as defined in
<b><a href=/docs/wayland/wayland/)])))#wl_surface.attach>wl_surface.attach</a></b>.<p>If the destination size is set, it causes the surface size to become
dst_width, dst_height. The source (rectangle) is scaled to exactly
this size. This overrides whatever the attached <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b> size is,
unless the <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b> is NULL. If the <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b> is NULL, the surface
has no content and therefore no size. Otherwise, the size is always
at least 1x1 in surface local coordinates.<p>If the source rectangle is set, it defines what area of the <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b> is
taken as the source. If the source rectangle is set and the destination
size is not set, then src_width and src_height must be integers, and the
surface size becomes the source rectangle size. This results in cropping
without scaling. If src_width or src_height are not integers and
destination size is not set, the bad_size protocol error is raised when
the surface state is applied.<p>The coordinate transformations from buffer pixel coordinates up to
the surface-local coordinates happen in the following order:
1. buffer_transform (<b><a href=/docs/wayland/wayland/)])))#wl_surface.set_buffer_transform>wl_surface.set_buffer_transform</a></b>)
2. buffer_scale (<b><a href=/docs/wayland/wayland/)])))#wl_surface.set_buffer_scale>wl_surface.set_buffer_scale</a></b>)
3. crop and scale (<b><a href=/docs/wayland/viewporter/)])))#></a></b>*)
This means, that the source rectangle coordinates of crop and scale
are given in the coordinates after the buffer transform and scale,
i.e. in the coordinates that would be the surface-local coordinates
if the crop and scale was not applied.<p>If src_x or src_y are negative, the bad_value protocol error is raised.
Otherwise, if the source rectangle is partially or completely outside of
the non-NULL <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b>, then the out_of_buffer protocol error is raised
when the surface state is applied. A NULL <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b> does not raise the
out_of_buffer error.<p>If the <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b> associated with the <b><a href=/docs/wayland/viewporter/)])))#wp_viewport>wp_viewport</a></b> is destroyed,
all <b><a href=/docs/wayland/viewporter/)])))#wp_viewport>wp_viewport</a></b> requests except 'destroy' raise the protocol error
no_surface.<p>If the <b><a href=/docs/wayland/viewporter/)])))#wp_viewport>wp_viewport</a></b> object is destroyed, the crop and scale
state is removed from the <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b>. The change will be applied
on the next <b><a href=/docs/wayland/wayland/)])))#wl_surface.commit>wl_surface.commit</a></b>.</div><div class=message-head><div class=row><div><h3><a id=wp_viewport.destroy href=#wp_viewport.destroy>wp_viewport.destroy</a></h3><p class=summary>remove scaling and cropping from the surface</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>The associated <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b>'s crop and scale state is removed.
The change is applied on the next <b><a href=/docs/wayland/wayland/)])))#wl_surface.commit>wl_surface.commit</a></b>.</div><div class=message-head><div class=row><div><h3><a id=wp_viewport.set_source href=#wp_viewport.set_source>wp_viewport.set_source</a></h3><p class=summary>set the source rectangle for cropping</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Set the source rectangle of the associated <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b>. See
<b><a href=/docs/wayland/viewporter/)])))#wp_viewport>wp_viewport</a></b> for the description, and relation to the <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b>
size.<p>If all of x, y, width and height are -1.0, the source rectangle is
unset instead. Any other set of values where width or height are zero
or negative, or x or y are negative, raise the bad_value protocol
error.<p>The crop and scale state is double-buffered, see <b><a href=/docs/wayland/wayland/)])))#wl_surface.commit>wl_surface.commit</a></b>.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>x<td>fixed<td><p>source rectangle x<tr><td>y<td>fixed<td><p>source rectangle y<tr><td>width<td>fixed<td><p>source rectangle width<tr><td>height<td>fixed<td><p>source rectangle height</table><div class=message-head><div class=row><div><h3><a id=wp_viewport.set_destination href=#wp_viewport.set_destination>wp_viewport.set_destination</a></h3><p class=summary>set the surface size for scaling</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Set the destination size of the associated <b><a href=/docs/wayland/wayland/)])))#wl_surface>wl_surface</a></b>. See
<b><a href=/docs/wayland/viewporter/)])))#wp_viewport>wp_viewport</a></b> for the description, and relation to the <b><a href=/docs/wayland/wayland/)])))#wl_buffer>wl_buffer</a></b>
size.<p>If width is -1 and height is -1, the destination size is unset
instead. Any other pair of values for width and height that
contains zero or negative values raises the bad_value protocol
error.<p>The crop and scale state is double-buffered, see <b><a href=/docs/wayland/wayland/)])))#wl_surface.commit>wl_surface.commit</a></b>.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>width<td>int<td><p>surface width<tr><td>height<td>int<td><p>surface height</table><div class=message-head><div class=row><div><h3><a id=wp_viewport.enums.error href=#wp_viewport.enums.error>wp_viewport.error</a></h3><p class=summary></div><div><b>Enum</b><br>Since Version 1</div></div></div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>bad_value<td>0<td>1<td><p>negative or zero values in width or height<tr><td>bad_size<td>1<td>1<td><p>destination size is not integer<tr><td>out_of_buffer<td>2<td>1<td><p>source rectangle extends outside of the content area<tr><td>no_surface<td>3<td>1<td><p>the wl_surface was destroyed</table><div class=interface-head><h2>Copyright</h2></div><div class=copyright><p><br>Copyright © 2013-2016 Collabora, Ltd.<br><br>Permission is hereby granted, free of charge, to any person obtaining a<br>copy of this software and associated documentation files (the "Software"),<br>to deal in the Software without restriction, including without limitation<br>the rights to use, copy, modify, merge, publish, distribute, sublicense,<br>and/or sell copies of the Software, and to permit persons to whom the<br>Software is furnished to do so, subject to the following conditions:<br><br>The above copyright notice and this permission notice (including the next<br>paragraph) shall be included in all copies or substantial portions of the<br>Software.<br><br>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL<br>THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING<br>FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER<br>DEALINGS IN THE SOFTWARE.<br></div></div></main><footer><span class=line>© 2021-2026 Isaac Freund,</span>
<span class=line><a href=/impressum>Impressum</a>,</span>
<span class=line>Content <a href=/CC-BY-NC-SA-4.0.txt>CC-BY-NC-SA-4.0</a>,</span>
<span class=line><a href=https://codeberg.org/ifreund/website>Source Code</a> <a href=/AGPL-3.0-only.txt>AGPL-3.0-only</a></span></footer>