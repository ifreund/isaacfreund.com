<!doctype html><html lang=en><meta name=viewport content="width=device-width,initial-scale=1"><title></title><link rel=icon href=/if.png><link rel=stylesheet href=/style.css><link rel=alternate href=/blog/feed.xml type=application/atom+xml title="Isaac Freund's Blog"><link rel=alternate href=/poetry/feed.xml type=application/atom+xml title="Isaac Freund's Poetry"><link rel=me href=https://hachyderm.io/@ifreund><header><nav><input type=checkbox id=toggle><div class=nav-bar><div class=nav-home><a href=/><svg viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="1" height="1"/><rect x="0" y="2" width="1" height="3"/><path d="M2 0h3v1H3v1h2v1H3v2H2V0z"/><rect x="4" y="4" width="1" height="1"/></svg></a></div><div class=menu><label for=toggle class=menu-button><svg class="menu-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><rect x="0" y="0" width="5" height="1"/><rect x="0" y="2" width="5" height="1"/><rect x="0" y="4" width="5" height="1"/></svg>
<svg class="close-icon" viewBox="0 0 5 5" shape-rendering="crispEdges"><line x1="0" y1="0" x2="5" y2="5"/><line x1="0" y1="5" x2="5" y2="0"/></svg></label></div></div></div><div class=nav-items><a href=/about>about</a>
<a href=/blog>blog</a>
<a href=/software>software</a>
<a href=/poetry>poetry</a>
<a href=/consulting>consulting</a></div></nav></header><main class="wayland-protocol ext-data-control-v1"><div class=title><div class=row><div><h1>ext-data-control-v1</h1><p class=summary>control data devices</div><div><p>(<a href=/docs/wayland>back</a>)<p></div></div></div><div class=content><div class=description><p>This protocol allows a privileged client to control data devices. In
particular, the client will be able to manage the current selection and take
the role of a clipboard manager.<p>Warning! The protocol described in this file is currently in the testing
phase. Backward compatible changes may be added together with the
corresponding interface version bump. Backward incompatible changes can
only be done by creating a new major version of the extension.</div><div class=interface-head><div class=row><div><h2><a id=ext_data_control_manager_v1 href=#ext_data_control_manager_v1>ext_data_control_manager_v1</a></h2><p class=summary>manager to control data devices</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>This interface is a manager that allows creating per-seat data device
controls.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_manager_v1.create_data_source href=#ext_data_control_manager_v1.create_data_source>ext_data_control_manager_v1.create_data_source</a></h3><p class=summary>create a new data source</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Create a new data source.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/ext-data-control-v1/#ext_data_control_source_v1>ext_data_control_source_v1</a></b>><td><p>data source to create</table><div class=message-head><div class=row><div><h3><a id=ext_data_control_manager_v1.get_data_device href=#ext_data_control_manager_v1.get_data_device>ext_data_control_manager_v1.get_data_device</a></h3><p class=summary>get a data device for a seat</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>Create a data device that can be used to manage a seat's selection.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/ext-data-control-v1/#ext_data_control_device_v1>ext_data_control_device_v1</a></b>><td><p><tr><td>seat<td>object&lt;<b><a href=/docs/wayland/wayland/#wl_seat>wl_seat</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=ext_data_control_manager_v1.destroy href=#ext_data_control_manager_v1.destroy>ext_data_control_manager_v1.destroy</a></h3><p class=summary>destroy the manager</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>All objects created by the manager will still remain valid, until their
appropriate destroy request has been called.</div><div class=interface-head><div class=row><div><h2><a id=ext_data_control_device_v1 href=#ext_data_control_device_v1>ext_data_control_device_v1</a></h2><p class=summary>manage a data device for a seat</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>This interface allows a client to manage a seat's selection.<p>When the seat is destroyed, this object becomes inert.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.set_selection href=#ext_data_control_device_v1.set_selection>ext_data_control_device_v1.set_selection</a></h3><p class=summary>copy data to the selection</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>This request asks the compositor to set the selection to the data from
the source on behalf of the client.<p>The given source may not be used in any further set_selection or
set_primary_selection requests. Attempting to use a previously used
source triggers the used_source protocol error.<p>To unset the selection, set the source to NULL.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>source<td>nullable
object&lt;<b><a href=/docs/wayland/ext-data-control-v1/#ext_data_control_source_v1>ext_data_control_source_v1</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.destroy href=#ext_data_control_device_v1.destroy>ext_data_control_device_v1.destroy</a></h3><p class=summary>destroy this data device</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroys the data device object.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.set_primary_selection href=#ext_data_control_device_v1.set_primary_selection>ext_data_control_device_v1.set_primary_selection</a></h3><p class=summary>copy data to the primary selection</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>This request asks the compositor to set the primary selection to the
data from the source on behalf of the client.<p>The given source may not be used in any further set_selection or
set_primary_selection requests. Attempting to use a previously used
source triggers the used_source protocol error.<p>To unset the primary selection, set the source to NULL.<p>The compositor will ignore this request if it does not support primary
selection.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>source<td>nullable
object&lt;<b><a href=/docs/wayland/ext-data-control-v1/#ext_data_control_source_v1>ext_data_control_source_v1</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.data_offer href=#ext_data_control_device_v1.data_offer>ext_data_control_device_v1.data_offer</a></h3><p class=summary>introduce a new ext_data_control_offer</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>The data_offer event introduces a new ext_data_control_offer object,
which will subsequently be used in either the
ext_data_control_device.selection event (for the regular clipboard
selections) or the ext_data_control_device.primary_selection event (for
the primary clipboard selections). Immediately following the
ext_data_control_device.data_offer event, the new data_offer object
will send out ext_data_control_offer.offer events to describe the MIME
types it offers.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>new_id&lt;<b><a href=/docs/wayland/ext-data-control-v1/#ext_data_control_offer_v1>ext_data_control_offer_v1</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.selection href=#ext_data_control_device_v1.selection>ext_data_control_device_v1.selection</a></h3><p class=summary>advertise new selection</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>The selection event is sent out to notify the client of a new
ext_data_control_offer for the selection for this device. The
ext_data_control_device.data_offer and the ext_data_control_offer.offer
events are sent out immediately before this event to introduce the data
offer object. The selection event is sent to a client when a new
selection is set. The ext_data_control_offer is valid until a new
ext_data_control_offer or NULL is received. The client must destroy the
previous selection ext_data_control_offer, if any, upon receiving this
event. Regardless, the previous selection will be ignored once a new
selection ext_data_control_offer is received.<p>The first selection event is sent upon binding the
ext_data_control_device object.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>nullable
object&lt;<b><a href=/docs/wayland/ext-data-control-v1/#ext_data_control_offer_v1>ext_data_control_offer_v1</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.finished href=#ext_data_control_device_v1.finished>ext_data_control_device_v1.finished</a></h3><p class=summary>this data control is no longer valid</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>This data control object is no longer valid and should be destroyed by
the client.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.primary_selection href=#ext_data_control_device_v1.primary_selection>ext_data_control_device_v1.primary_selection</a></h3><p class=summary>advertise new primary selection</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>The primary_selection event is sent out to notify the client of a new
ext_data_control_offer for the primary selection for this device. The
ext_data_control_device.data_offer and the ext_data_control_offer.offer
events are sent out immediately before this event to introduce the data
offer object. The primary_selection event is sent to a client when a
new primary selection is set. The ext_data_control_offer is valid until
a new ext_data_control_offer or NULL is received. The client must
destroy the previous primary selection ext_data_control_offer, if any,
upon receiving this event. Regardless, the previous primary selection
will be ignored once a new primary selection ext_data_control_offer is
received.<p>If the compositor supports primary selection, the first
primary_selection event is sent upon binding the
ext_data_control_device object.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>id<td>nullable
object&lt;<b><a href=/docs/wayland/ext-data-control-v1/#ext_data_control_offer_v1>ext_data_control_offer_v1</a></b>><td><p></table><div class=message-head><div class=row><div><h3><a id=ext_data_control_device_v1.enums.error href=#ext_data_control_device_v1.enums.error>ext_data_control_device_v1.error</a></h3><p class=summary></div><div><b>Enum</b><br>Since Version 1</div></div></div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>used_source<td>1<td>1<td><p>source given to set_selection or set_primary_selection was already used before</table><div class=interface-head><div class=row><div><h2><a id=ext_data_control_source_v1 href=#ext_data_control_source_v1>ext_data_control_source_v1</a></h2><p class=summary>offer to transfer data</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>The ext_data_control_source object is the source side of a
ext_data_control_offer. It is created by the source client in a data
transfer and provides a way to describe the offered data and a way to
respond to requests to transfer the data.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_source_v1.offer href=#ext_data_control_source_v1.offer>ext_data_control_source_v1.offer</a></h3><p class=summary>add an offered MIME type</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>This request adds a MIME type to the set of MIME types advertised to
targets. Can be called several times to offer multiple types.<p>Calling this after ext_data_control_device.set_selection is a protocol
error.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p>MIME type offered by the data source</table><div class=message-head><div class=row><div><h3><a id=ext_data_control_source_v1.destroy href=#ext_data_control_source_v1.destroy>ext_data_control_source_v1.destroy</a></h3><p class=summary>destroy this source</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroys the data source object.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_source_v1.send href=#ext_data_control_source_v1.send>ext_data_control_source_v1.send</a></h3><p class=summary>send the data</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>Request for data from the client. Send the data as the specified MIME
type over the passed file descriptor, then close it.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p>MIME type for the data<tr><td>fd<td>fd<td><p>file descriptor for the data</table><div class=message-head><div class=row><div><h3><a id=ext_data_control_source_v1.cancelled href=#ext_data_control_source_v1.cancelled>ext_data_control_source_v1.cancelled</a></h3><p class=summary>selection was cancelled</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>This data source is no longer valid. The data source has been replaced
by another data source.<p>The client should clean up and destroy this data source.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_source_v1.enums.error href=#ext_data_control_source_v1.enums.error>ext_data_control_source_v1.error</a></h3><p class=summary></div><div><b>Enum</b><br>Since Version 1</div></div></div><table class=enum><thead><tr><th>Entry<th>Value<th>Since<th>Description<tbody><tr><td>invalid_offer<td>1<td>1<td><p>offer sent after ext_data_control_device.set_selection</table><div class=interface-head><div class=row><div><h2><a id=ext_data_control_offer_v1 href=#ext_data_control_offer_v1>ext_data_control_offer_v1</a></h2><p class=summary>offer to transfer data</div><div><b>Interface</b><br>Version 1</div></div></div><div class=description><p>A ext_data_control_offer represents a piece of data offered for transfer
by another client (the source client). The offer describes the different
MIME types that the data can be converted to and provides the mechanism
for transferring the data directly from the source client.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_offer_v1.receive href=#ext_data_control_offer_v1.receive>ext_data_control_offer_v1.receive</a></h3><p class=summary>request that the data is transferred</div><div><b>Request</b><br>Since Version 1</div></div></div><div class=description><p>To transfer the offered data, the client issues this request and
indicates the MIME type it wants to receive. The transfer happens
through the passed file descriptor (typically created with the pipe
system call). The source client writes the data in the MIME type
representation requested and then closes the file descriptor.<p>The receiving client reads from the read end of the pipe until EOF and
then closes its end, at which point the transfer is complete.<p>This request may happen multiple times for different MIME types.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p>MIME type desired by receiver<tr><td>fd<td>fd<td><p>file descriptor for data transfer</table><div class=message-head><div class=row><div><h3><a id=ext_data_control_offer_v1.destroy href=#ext_data_control_offer_v1.destroy>ext_data_control_offer_v1.destroy</a></h3><p class=summary>destroy this offer</div><div><b>Destructor
Request</b><br>Since Version 1</div></div></div><div class=description><p>Destroys the data offer object.</div><div class=message-head><div class=row><div><h3><a id=ext_data_control_offer_v1.offer href=#ext_data_control_offer_v1.offer>ext_data_control_offer_v1.offer</a></h3><p class=summary>advertise offered MIME type</div><div><b>Event</b><br>Since Version 1</div></div></div><div class=description><p>Sent immediately after creating the ext_data_control_offer object.
One event per offered MIME type.</div><table class=args><thead><tr><th>Argument<th>Type<th>Description<tbody><tr><td>mime_type<td>string<td><p>offered MIME type</table><div class=interface-head><h2>Copyright</h2></div><div class=copyright><p><br>Copyright © 2018 Simon Ser<br>Copyright © 2019 Ivan Molodetskikh<br>Copyright © 2024 Neal Gompa<br><br>Permission to use, copy, modify, distribute, and sell this<br>software and its documentation for any purpose is hereby granted<br>without fee, provided that the above copyright notice appear in<br>all copies and that both that copyright notice and this permission<br>notice appear in supporting documentation, and that the name of<br>the copyright holders not be used in advertising or publicity<br>pertaining to distribution of the software without specific,<br>written prior permission. The copyright holders make no<br>representations about the suitability of this software for any<br>purpose. It is provided "as is" without express or implied<br>warranty.<br><br>THE COPYRIGHT HOLDERS DISCLAIM ALL WARRANTIES WITH REGARD TO THIS<br>SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND<br>FITNESS, IN NO EVENT SHALL THE COPYRIGHT HOLDERS BE LIABLE FOR ANY<br>SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES<br>WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN<br>AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION,<br>ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF<br>THIS SOFTWARE.<br></div></div></main><footer><span class=line>© 2021-2026 Isaac Freund,</span>
<span class=line><a href=/impressum>Impressum</a>,</span>
<span class=line>Content <a href=/CC-BY-NC-SA-4.0.txt>CC-BY-NC-SA-4.0</a>,</span>
<span class=line><a href=https://codeberg.org/ifreund/website>Source Code</a> <a href=/AGPL-3.0-only.txt>AGPL-3.0-only</a></span></footer>